<!doctype html>
<html>
<head>
    <meta property="wb:webmaster" content="18bc8c57bb236b22" />
    <meta charset="utf-8">
    <title>夏日里的一把阳光博客</title>
    <meta name="author" content="夏日里的一把阳光，周光" />
    <meta name="description" content="周光的个人博客 php vue js linux mysql" />
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="//cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
    <script src="//cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?56725baa1435f28abb0efa8bcc604442";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



</head>
<body>
<div class="container" style="margin-top:9%;">
    <button onclick="qqlopgin()">qq登录</button>
</div>
</body>
<script>
    function qqlopgin(){

        var autho = window.open(
            "http://api.noahzhou.com/api/autho/autho?type=1",
            '',
            'height=400,width=600,top=200,left=200,toolbar=no,menubar=no,scrollbars=no,resizable=no,location=no,status=no'
        );

        var loop = setInterval(function() {
            if(isLogin()){
                autho.close();
            }

            // if(autho.closed) {
            //     clearInterval(loop);//停止循环执行
            //     if(isLogin()){
            //         location.reload()
            //     }
            // }
        }, 1000);

    }

    //登录检测方法
    const isLogin = function () {
        let autho = getCookie('autho');
        console.log(autho);
        return autho ? true:false;
    }
    
    function getCookie(name)
    {

        var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");

        if(arr=document.cookie.match(reg))

            return unescape(arr[2]);

        else

            return null;

    }


</script>
</html>